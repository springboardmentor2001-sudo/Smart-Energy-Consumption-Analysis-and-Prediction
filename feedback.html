{% extends "base.html" %}
{% block title %}Feedback{% endblock %}
{% block content %}
<style>
/* FORCE Large Screen Styles */
.feedback-page { max-width: 1400px; margin: 0 auto; padding: 0 2rem; }
.feedback-title { 
    font-size: clamp(2.2rem, 5vw, 3.5rem) !important; 
    margin-bottom: 0.5rem !important; 
    background: linear-gradient(135deg, #4fd1c7, #81e6d9) !important; 
    -webkit-background-clip: text !important; 
    -webkit-text-fill-color: transparent !important;
    font-weight: 700 !important;
}
.feedback-subtitle { 
    opacity: 0.9 !important; 
    margin-bottom: 3rem !important; 
    font-size: 1.25rem !important; 
    color: #cbd5e1 !important;
}

/* DESKTOP ONLY - 2 COLUMN */
@media (min-width: 1200px) {
    .feedback-grid { 
        display: grid !important; 
        grid-template-columns: 1fr 1fr !important; 
        gap: 3rem !important; 
        margin-top: 2rem !important;
    }
    .feedback-form-card, .feedback-list-card { 
        background: rgba(255,255,255,0.08) !important; 
        border-radius: 24px !important; 
        padding: 2.5rem !important; 
        backdrop-filter: blur(20px) !important; 
        border: 1px solid rgba(255,255,255,0.15) !important; 
        box-shadow: 0 25px 50px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.2) !important;
        transition: all 0.3s ease !important;
        height: fit-content !important;
    }
    .feedback-list-card { 
        height: 600px !important; 
        display: flex !important; 
        flex-direction: column !important;
    }
    .feedbacks-scroll { 
        flex: 1 !important; 
        overflow-y: auto !important; 
        padding-right: 1rem !important; 
        margin-top: 1.5rem !important;
        max-height: 500px !important;
    }
}

/* MOBILE - SINGLE COLUMN */
@media (max-width: 1199px) {
    .feedback-grid { 
        display: block !important; 
        margin-top: 2rem !important;
    }
    .feedback-form-card, .feedback-list-card { 
        margin-bottom: 2rem !important;
        height: auto !important;
    }
    .feedbacks-scroll { 
        max-height: none !important; 
        overflow: visible !important;
    }
}

.feedback-form-grid { 
    display: grid !important; 
    grid-template-columns: 1fr !important; 
    gap: 1.5rem !important; 
    margin-top: 1rem !important;
}
.feedback-label { 
    display: flex !important; 
    flex-direction: column !important; 
    gap: 0.5rem !important; 
    font-size: 0.95rem !important; 
    font-weight: 500 !important;
    color: #e2e8f0 !important;
}
.feedback-textarea { 
    border-radius: 16px !important; 
    border: 1px solid rgba(255,255,255,0.2) !important; 
    padding: 1.5rem !important; 
    background: rgba(255,255,255,0.06) !important; 
    color: #f8fafc !important; 
    font-size: 1rem !important; 
    font-family: inherit !important;
    resize: vertical !important;
    min-height: 140px !important;
    transition: all 0.3s ease !important;
}
.feedback-textarea:focus { 
    outline: none !important;
    border-color: #4fd1c7 !important; 
    box-shadow: 0 0 0 4px rgba(79,209,197,0.2) !important;
    background: rgba(255,255,255,0.12) !important;
}
.feedback-textarea::placeholder { color: #94a3b8 !important; }

.feedback-btn { 
    grid-column: 1 / -1 !important; 
    margin-top: 1rem !important; 
    padding: 1.25rem 2rem !important; 
    border-radius: 20px !important; 
    background: linear-gradient(135deg, #4fd1c7 0%, #3b82f6 100%) !important; 
    border: none !important; 
    color: #0f172a !important; 
    font-weight: 700 !important; 
    font-size: 1.1rem !important; 
    cursor: pointer !important; 
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}
.feedback-btn:hover { 
    transform: translateY(-3px) scale(1.02) !important;
    box-shadow: 0 20px 40px rgba(79,209,197,0.4) !important;
}

.feedback-item { 
    background: rgba(79,209,197,0.08) !important; 
    padding: 1.75rem !important; 
    border-radius: 16px !important; 
    margin-bottom: 1.25rem !important; 
    border-left: 4px solid #4fd1c7 !important;
    transition: all 0.3s ease !important;
}
.feedback-item:hover { 
    transform: translateY(-4px) !important;
    box-shadow: 0 20px 40px rgba(79,209,197,0.3) !important;
}
.rating-display { 
    font-size: 1.4rem !important; 
    font-weight: 700 !important; 
    margin-bottom: 0.75rem !important;
}
.feedback-message { 
    margin: 1rem 0 !important; 
    line-height: 1.7 !important; 
    color: #e2e8f0 !important;
}
.feedback-time { 
    color: #94a3b8 !important; 
    font-size: 0.88rem !important;
}
.no-feedback { 
    text-align: center !important; 
    padding: 3rem 2rem !important; 
    opacity: 0.7 !important;
}

/* Custom Scrollbar */
.feedbacks-scroll::-webkit-scrollbar { width: 8px !important; }
.feedbacks-scroll::-webkit-scrollbar-track { 
    background: rgba(255,255,255,0.05) !important; 
    border-radius: 10px !important;
}
.feedbacks-scroll::-webkit-scrollbar-thumb { 
    background: linear-gradient(135deg, #4fd1c7, #3b82f6) !important; 
    border-radius: 10px !important;
}
</style>

<div class="feedback-page">
    <h1 class="feedback-title">üìù Feedback</h1>
    <p class="feedback-subtitle">Rate the app and share your thoughts!</p>
    
    <div class="feedback-grid">
        <!-- Feedback Form -->
        <div class="feedback-form-card">
            <h2 style="margin-bottom: 1.5rem; color: #e2e8f0;">Submit Feedback</h2>
            <form method="POST" class="feedback-form-grid">
                <label class="feedback-label">
                    Rating (1-5 ‚≠ê)
                    <select name="rating" style="border-radius: 16px; border: 1px solid rgba(255,255,255,0.2); padding: 1rem 1.25rem; background: rgba(255,255,255,0.06); color: #f8fafc; font-size: 1rem;" required>
                        <option value="">Select rating...</option>
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent (5)</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Good (4)</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê Average (3)</option>
                        <option value="2">‚≠ê‚≠ê Poor (2)</option>
                        <option value="1">‚≠ê Very Poor (1)</option>
                    </select>
                </label>
                <label class="feedback-label" style="grid-column: 1 / -1;">
                    Your Message
                    <textarea name="message" class="feedback-textarea" 
                              placeholder="What features do you love? Any suggestions for improvement? How can we make the app better for you?" required></textarea>
                </label>
                <button type="submit" class="feedback-btn">üì§ Submit Feedback</button>
            </form>
        </div>
        
        <!-- Display Feedbacks -->
        <div class="feedback-list-card">
            <h2 style="margin-bottom: 1.5rem; color: #e2e8f0;">Your Feedbacks ({{ feedbacks|length }})</h2>
            <div class="feedbacks-scroll">
                {% if feedbacks %}
                    {% for fb in feedbacks %}
                    <div class="feedback-item">
                        <div class="rating-display">{{ '‚≠ê' * fb.rating }} <span style="color: #4fd1c7; font-weight: 600;">{{ fb.rating }}/5</span></div>
                        <p class="feedback-message">{{ fb.message }}</p>
                        <div class="feedback-time">{{ fb.timestamp.strftime('%b %d, %Y %I:%M %p') }}</div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="no-feedback">
                        <p>No feedbacks yet. Submit your first one above! üòä</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
