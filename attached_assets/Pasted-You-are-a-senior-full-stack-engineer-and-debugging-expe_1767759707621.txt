You are a senior full-stack engineer and debugging expert.

I am facing the following runtime errors in my Node.js + Express + TypeScript project.
Analyze the logs carefully and FIX the root cause, not just silence the error.

-------------------------
ERROR LOGS (IMPORTANT)
-------------------------

A PostCSS plugin did not pass the `from` option to `postcss.parse`.

AI generation error:
TypeError: ai.getGenerativeModel is not a function
    at server/routes.ts:452
    at server/routes.ts:188

POST /api/chat returns 200 but AI generation fails
POST /api/extract-validate returns 500 (Internal Server Error)

-------------------------
PROJECT CONTEXT
-------------------------

• Backend: Node.js + Express + TypeScript
• AI integration: Google Gemini API
• Frontend: React / Vite (uses PostCSS)
• Environment variables used for API keys
• AI object is initialized before calling getGenerativeModel()
• Code previously worked or was migrated from older Gemini SDK examples

-------------------------
WHAT YOU MUST DO
-------------------------

1. Identify why `ai.getGenerativeModel` is undefined
2. Check Gemini SDK version mismatch or incorrect import
3. Replace deprecated Gemini API usage with the correct, latest API
4. Fix AI initialization properly (GoogleGenerativeAI usage)
5. Ensure async/await is handled correctly
6. Ensure errors do NOT silently pass with 200 status
7. Fix PostCSS warning if configuration is missing `from` option
8. Update routes.ts so:
   - /api/chat works correctly
   - /api/extract-validate does not crash
9. Show corrected code for:
   - Gemini initialization
   - AI generation call
   - Express route handler
10. Ensure the fix works in VS Code on Windows

-------------------------
STRICT RULES
-------------------------

• Do NOT suggest hacks or temporary workarounds
• Do NOT ignore the error
• Do NOT change project structure unnecessarily
• Use official Gemini SDK only
• Output FINAL corrected code blocks
• Explain briefly WHY the error happened
• Ensure code is production-safe

-------------------------
EXPECTED RESULT
-------------------------

• No `getGenerativeModel is not a function` error
• AI responses work correctly
• No 500 error on extract route
• Clean VS Code logs
• Project runs successfully using `npm run dev`

Start debugging now.
